
<div class="px-4 min-h-screen flex justify-center items-center relative" *ngIf="!showVerifyCard && !showSentCard">
    <div class="bg-white shadow-xl rounded-2xl px-8 py-12 md:px-16 w-full max-w-md border border-[#c3e6db] z-10 text-center">
        <div class="flex justify-center mb-6">
            <img src="img/logo.webp" alt="panda icon" class="h-20" />
        </div>

        <h2 class="text-xl font-semibold text-gray-800 mb-2">¿Olvidaste tu contraseña?</h2>
        <p class="text-gray-600 text-sm mb-6">Ingresa tu correo para restablecer tu contraseña.</p>

        <div class="flex flex-col gap-5 text-left">
            <p-iconfield>
                <p-inputicon class="pi pi-envelope" />
                <input type="email" [(ngModel)]="email" pInputText placeholder="Correo electrónico" class="w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-emerald-400" />
            </p-iconfield>

            <div class="flex justify-between gap-4 mt-2">
                <button pButton type="button" (click)="router.navigate(['/auth/login'])" label="Cancelar" class="w-full border border-emerald-400 text-emerald-600 bg-white rounded-xl"></button>
                <button pButton type="submit" label="Enviar" class="w-full bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl" (click)="submit()" [disabled]="!email"></button>
            </div>
        </div>
    </div>
</div>

<div *ngIf="showVerifyCard" class="min-h-screen flex bg-slate-50/40 fixed inset-0 z-50">
    <div class="w-full flex justify-center items-center px-6 py-12">
        <div class="bg-white shadow-xl rounded-2xl px-8 py-12 md:px-16 w-full max-w-3xl border border-[#c3e6db] z-10 text-center">
            <div class="flex justify-center mb-6">
                <img src="img/logo.webp" alt="panda icon" class="h-20" />
            </div>
            <h2 class="text-xl font-semibold text-gray-800 mb-2">¡Primero verifica tu correo!</h2>
            <p class="text-gray-600">Tu cuenta <strong>{{ email }}</strong> aún no ha sido verificada.</p>
            <p class="text-gray-600">Revisa tu bandeja de entrada y haz clic para activarla.</p>

            <div *ngIf="checkingVerification" class="mt-4 text-sm text-emerald-500 animate-pulse">Esperando verificación...</div>

            <button pButton class="w-full mt-6 mb-3 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl transition duration-300 shadow-sm py-2"
                [disabled]="resending || countdown > 0" (click)="resendVerificationEmail()">
                <ng-container *ngIf="resending"><i class="pi pi-spin pi-spinner mr-2"></i> Reintentar en {{ countdown }}s</ng-container>
                <ng-container *ngIf="!resending && countdown === 0"> Reenviar correo de verificación </ng-container>
            </button>

            <button pButton class="w-full bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-xl py-2" (click)="router.navigate(['/'])">Volver al inicio</button>
        </div>
    </div>
</div>

<div *ngIf="showSentCard" class="min-h-screen flex bg-slate-50/40 fixed inset-0 z-50">
    <div class="w-full flex justify-center items-center px-6 py-12">
        <div class="bg-white shadow-xl rounded-2xl px-8 py-12 md:px-16 w-full max-w-2xl border border-[#c3e6db] z-10 text-center">
            <div class="flex justify-center mb-6">
                <img src="img/logo.webp" alt="panda icon" class="h-20" />
            </div>
            <h2 class="text-xl font-semibold text-gray-800 mb-2">¡Revisa tu correo!</h2>
            <p class="text-gray-600">Se ha enviado un enlace de recuperación a <strong>{{ email }}</strong>.</p>
            <button pButton class="w-full mt-6 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl py-2" (click)="router.navigate(['/auth/login'])">Volver a login</button>
        </div>
    </div>
</div>